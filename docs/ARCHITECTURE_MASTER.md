# Deep Research System: Master Architecture Specification

> **Document Purpose**: Complete technical blueprint for the anti-hallucination financial research system.
> **Audience**: Technical leads, investors, auditors, and future contributors.
> **Last Updated**: December 15, 2025

---

## Table of Contents

1. [System Philosophy](#1-system-philosophy)
2. [Trust Hierarchy](#2-trust-hierarchy)
3. [Complete System Diagram](#3-complete-system-diagram)
4. [Component Deep Dives](#4-component-deep-dives)
5. [Data Flow Architecture](#5-data-flow-architecture)
6. [Gate System](#6-gate-system)
7. [Storage Architecture](#7-storage-architecture)
8. [Search & Discovery](#8-search--discovery)
9. [Extraction Pipeline](#9-extraction-pipeline)
10. [Verification System](#10-verification-system)
11. [Signal Detection](#11-signal-detection)
12. [Narrator System](#12-narrator-system)
13. [API Layer](#13-api-layer)
14. [Observability](#14-observability)
15. [Failure Modes](#15-failure-modes)
16. [Component Status Matrix](#16-component-status-matrix)

---

## 1. System Philosophy

### 1.1 Core Principle: "Fail Closed, Never Fabricate"

The system is designed around a single, inviolable principle:

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                                                             â”‚
â”‚   "I don't know" is ALWAYS preferable to "Here's a confident wrong answer" â”‚
â”‚                                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

Every component in this system is built to **fail closed**:
- If verification fails â†’ return "insufficient data", not a guess
- If extraction is ambiguous â†’ reject, don't infer
- If sources conflict â†’ surface the conflict, don't pick a winner
- If confidence is low â†’ say so explicitly

### 1.2 The Hallucination Problem

Traditional LLM systems fail in financial contexts because:

| Failure Mode | Example | Consequence |
|--------------|---------|-------------|
| **Fabricated Numbers** | "NVDA revenue was $35B" (actually $30B) | Wrong trading decisions |
| **Stale Data** | Using training cutoff data | Outdated analysis |
| **Source Confusion** | Mixing Q3 and Q4 numbers | Incorrect comparisons |
| **Confident Uncertainty** | "Revenue increased 15%" (made up) | False confidence |
| **Missing Attribution** | Numbers with no source | Unverifiable claims |

### 1.3 Our Solution: Tiered Trust + Hard Gates

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         TRUST DEGRADATION MODEL                             â”‚
â”‚                                                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚   TIER 1    â”‚ â”€â–º â”‚   TIER 2    â”‚ â”€â–º â”‚   TIER 3    â”‚ â”€â–º â”‚  REJECTED   â”‚  â”‚
â”‚  â”‚             â”‚    â”‚             â”‚    â”‚             â”‚    â”‚             â”‚  â”‚
â”‚  â”‚  SEC XBRL   â”‚    â”‚  SEC HTML   â”‚    â”‚  Web/News   â”‚    â”‚ Unverified  â”‚  â”‚
â”‚  â”‚  Machine    â”‚    â”‚  Verified   â”‚    â”‚  Verified   â”‚    â”‚ Claims      â”‚  â”‚
â”‚  â”‚  Readable   â”‚    â”‚  Extraction â”‚    â”‚  Multi-Src  â”‚    â”‚             â”‚  â”‚
â”‚  â”‚             â”‚    â”‚             â”‚    â”‚             â”‚    â”‚             â”‚  â”‚
â”‚  â”‚ trust=1.0   â”‚    â”‚ trust=0.85  â”‚    â”‚ trust=0.6   â”‚    â”‚ trust=0.0   â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                                             â”‚
â”‚  INVARIANT: Lower tiers CANNOT override higher tiers                       â”‚
â”‚  INVARIANT: All tiers require verification before storage                  â”‚
â”‚  INVARIANT: Trust scores are explicit, never implicit                      â”‚
â”‚                                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## 2. Trust Hierarchy

### 2.1 Tier Definitions

#### Tier 1: Authoritative Machine-Readable Data

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                              TIER 1: XBRL                                   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                             â”‚
â”‚  SOURCE: SEC EDGAR XBRL filings (10-K, 10-Q, 8-K)                          â”‚
â”‚                                                                             â”‚
â”‚  CHARACTERISTICS:                                                           â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ â€¢ Machine-generated by company accounting systems                    â”‚   â”‚
â”‚  â”‚ â€¢ Auditor-reviewed (for 10-K/10-Q)                                  â”‚   â”‚
â”‚  â”‚ â€¢ Standardized GAAP/IFRS taxonomy                                   â”‚   â”‚
â”‚  â”‚ â€¢ Legal liability attached (CFO/CEO certification)                  â”‚   â”‚
â”‚  â”‚ â€¢ Immutable once filed (amendments are separate filings)            â”‚   â”‚
â”‚  â”‚ â€¢ Exact numeric precision (no rounding ambiguity)                   â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                             â”‚
â”‚  TRUST LEVEL: HIGH (1.0)                                                   â”‚
â”‚  VERIFICATION: Auto-verified (source is authoritative)                     â”‚
â”‚  STORAGE: Direct to FactStore with source_tier="tier1"                     â”‚
â”‚                                                                             â”‚
â”‚  EXAMPLE FACTS:                                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ {                                                                    â”‚   â”‚
â”‚  â”‚   "metric": "Revenues",                                              â”‚   â”‚
â”‚  â”‚   "value": 35082000000,                                              â”‚   â”‚
â”‚  â”‚   "unit": "USD",                                                     â”‚   â”‚
â”‚  â”‚   "period": "FY2024",                                                â”‚   â”‚
â”‚  â”‚   "source_format": "xbrl",                                           â”‚   â”‚
â”‚  â”‚   "source_tier": "tier1",                                            â”‚   â”‚
â”‚  â”‚   "trust_level": "high",                                             â”‚   â”‚
â”‚  â”‚   "verification_status": "exact_match"                               â”‚   â”‚
â”‚  â”‚ }                                                                    â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                             â”‚
â”‚  LIMITATIONS:                                                               â”‚
â”‚  â€¢ Only covers standardized financial metrics                              â”‚
â”‚  â€¢ No qualitative information (risks, MD&A narrative)                      â”‚
â”‚  â€¢ Filing delay (45-90 days after period end)                              â”‚
â”‚  â€¢ Some companies have XBRL quality issues                                 â”‚
â”‚                                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

#### Tier 2: Verified Extracted Data

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                           TIER 2: HTML EXTRACTION                           â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                             â”‚
â”‚  SOURCE: SEC filing HTML (Item 1A Risk Factors, Item 7 MD&A, etc.)         â”‚
â”‚                                                                             â”‚
â”‚  CHARACTERISTICS:                                                           â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ â€¢ Human-written prose requiring NLP extraction                       â”‚   â”‚
â”‚  â”‚ â€¢ Same legal liability as XBRL (part of same filing)                â”‚   â”‚
â”‚  â”‚ â€¢ Contains qualitative + quantitative information                    â”‚   â”‚
â”‚  â”‚ â€¢ Formatting varies by company (no standard structure)              â”‚   â”‚
â”‚  â”‚ â€¢ May contain forward-looking statements                            â”‚   â”‚
â”‚  â”‚ â€¢ Requires LLM for extraction â†’ requires verification               â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                             â”‚
â”‚  TRUST LEVEL: HIGH (0.85) - after Gate A verification                     â”‚
â”‚  VERIFICATION: Gate A (sentence must exist in source HTML)                 â”‚
â”‚  STORAGE: Only after passing Gate A, with source_tier="tier2"              â”‚
â”‚                                                                             â”‚
â”‚  EXTRACTION FLOW:                                                           â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚                                                                      â”‚   â”‚
â”‚  â”‚  SEC HTML â”€â”€â–º Section Locator â”€â”€â–º LLM Extraction â”€â”€â–º Gate A â”€â”€â–º Storeâ”‚   â”‚
â”‚  â”‚     â”‚              â”‚                    â”‚              â”‚             â”‚   â”‚
â”‚  â”‚     â”‚         (deterministic)      (structured)   (verification)     â”‚   â”‚
â”‚  â”‚     â”‚                                   â”‚              â”‚             â”‚   â”‚
â”‚  â”‚     â”‚                                   â–¼              â”‚             â”‚   â”‚
â”‚  â”‚     â”‚                            sentence_string      â”‚             â”‚   â”‚
â”‚  â”‚     â”‚                            (exact quote)         â”‚             â”‚   â”‚
â”‚  â”‚     â”‚                                   â”‚              â”‚             â”‚   â”‚
â”‚  â”‚     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜             â”‚   â”‚
â”‚  â”‚                                         â”‚                            â”‚   â”‚
â”‚  â”‚                            Must exist in source HTML                 â”‚   â”‚
â”‚  â”‚                                                                      â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                             â”‚
â”‚  GATE A VERIFICATION:                                                       â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ For NUMERIC facts:                                                   â”‚   â”‚
â”‚  â”‚   â€¢ Extract number from sentence_string                              â”‚   â”‚
â”‚  â”‚   â€¢ Compare to fact.value                                            â”‚   â”‚
â”‚  â”‚   â€¢ â‰¤1% difference â†’ exact_match                                     â”‚   â”‚
â”‚  â”‚   â€¢ â‰¤5% difference â†’ approximate_match                               â”‚   â”‚
â”‚  â”‚   â€¢ >5% difference â†’ mismatch â†’ REJECTED                             â”‚   â”‚
â”‚  â”‚                                                                      â”‚   â”‚
â”‚  â”‚ For TEXT facts:                                                      â”‚   â”‚
â”‚  â”‚   â€¢ Normalize whitespace in sentence_string                          â”‚   â”‚
â”‚  â”‚   â€¢ Check if normalized string exists in source HTML                 â”‚   â”‚
â”‚  â”‚   â€¢ Found â†’ exact_match                                              â”‚   â”‚
â”‚  â”‚   â€¢ Not found â†’ mismatch â†’ REJECTED                                  â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                             â”‚
â”‚  SECTIONS SUPPORTED:                                                        â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ Section       â”‚ Content Type                           â”‚ Status     â”‚   â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤   â”‚
â”‚  â”‚ Item 1A       â”‚ Risk Factors (qualitative risks)       â”‚ âœ… LIVE    â”‚   â”‚
â”‚  â”‚ Item 7        â”‚ MD&A (financial discussion + numbers)  â”‚ âœ… LIVE    â”‚   â”‚
â”‚  â”‚ Item 1        â”‚ Business Description                   â”‚ ğŸ”² PLANNED â”‚   â”‚
â”‚  â”‚ Item 2        â”‚ Properties                             â”‚ ğŸ”² PLANNED â”‚   â”‚
â”‚  â”‚ Item 8        â”‚ Financial Statements                   â”‚ ğŸ”² PLANNED â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                             â”‚
â”‚  LIMITATIONS:                                                               â”‚
â”‚  â€¢ LLM extraction is imperfect (may miss facts)                            â”‚
â”‚  â€¢ Numeric verification only catches value mismatches, not wrong metrics   â”‚
â”‚  â€¢ Section detection can fail on unusual filing formats                    â”‚
â”‚  â€¢ Forward-looking statements need explicit tagging (not implemented)      â”‚
â”‚                                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

#### Tier 3: Verified External Data

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         TIER 3: WEB/NEWS SOURCES                            â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                             â”‚
â”‚  SOURCE: Financial news, press releases, investor relations sites          â”‚
â”‚                                                                             â”‚
â”‚  DOMAIN HIERARCHY:                                                          â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ TIER 3A - Primary Sources (trust=0.8):                              â”‚   â”‚
â”‚  â”‚   â€¢ investor.apple.com (company IR sites)                           â”‚   â”‚
â”‚  â”‚   â€¢ sec.gov (non-XBRL content)                                      â”‚   â”‚
â”‚  â”‚   â€¢ Company press releases (primary domain)                         â”‚   â”‚
â”‚  â”‚                                                                      â”‚   â”‚
â”‚  â”‚ TIER 3B - Premium Financial News (trust=0.7):                       â”‚   â”‚
â”‚  â”‚   â€¢ wsj.com                                                          â”‚   â”‚
â”‚  â”‚   â€¢ reuters.com                                                      â”‚   â”‚
â”‚  â”‚   â€¢ bloomberg.com                                                    â”‚   â”‚
â”‚  â”‚   â€¢ ft.com                                                           â”‚   â”‚
â”‚  â”‚                                                                      â”‚   â”‚
â”‚  â”‚ TIER 3C - General News (trust=0.5):                                 â”‚   â”‚
â”‚  â”‚   â€¢ cnbc.com                                                         â”‚   â”‚
â”‚  â”‚   â€¢ marketwatch.com                                                  â”‚   â”‚
â”‚  â”‚   â€¢ yahoo finance                                                    â”‚   â”‚
â”‚  â”‚                                                                      â”‚   â”‚
â”‚  â”‚ TIER 3D - User-Generated/Social (trust=0.2):                        â”‚   â”‚
â”‚  â”‚   â€¢ seekingalpha.com                                                 â”‚   â”‚
â”‚  â”‚   â€¢ twitter/X                                                        â”‚   â”‚
â”‚  â”‚   â€¢ reddit                                                           â”‚   â”‚
â”‚  â”‚   â€¢ blogs                                                            â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                             â”‚
â”‚  VERIFICATION REQUIREMENTS (Gate B):                                        â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ 1. TEXT PROVENANCE:                                                  â”‚   â”‚
â”‚  â”‚    â€¢ sentence_string must exist in source article                   â”‚   â”‚
â”‚  â”‚    â€¢ URL must be durable (no paywall bypass)                        â”‚   â”‚
â”‚  â”‚                                                                      â”‚   â”‚
â”‚  â”‚ 2. CROSS-VERIFICATION (for quantitative claims):                    â”‚   â”‚
â”‚  â”‚    â€¢ Compare against Tier 1/2 facts if available                    â”‚   â”‚
â”‚  â”‚    â€¢ â‰¤1% match â†’ verified                                           â”‚   â”‚
â”‚  â”‚    â€¢ â‰¤5% match â†’ close (rounding)                                   â”‚   â”‚
â”‚  â”‚    â€¢ >5% mismatch â†’ contradicted â†’ FLAGGED                          â”‚   â”‚
â”‚  â”‚                                                                      â”‚   â”‚
â”‚  â”‚ 3. MULTI-SOURCE CORROBORATION (NOT YET IMPLEMENTED):                â”‚   â”‚
â”‚  â”‚    â€¢ Single source â†’ lower confidence                               â”‚   â”‚
â”‚  â”‚    â€¢ 2+ independent sources â†’ higher confidence                     â”‚   â”‚
â”‚  â”‚    â€¢ Conflicting sources â†’ surface conflict                         â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                             â”‚
â”‚  STORAGE:                                                                   â”‚
â”‚  â€¢ Only after passing Gate B                                               â”‚
â”‚  â€¢ source_tier="tier3"                                                     â”‚
â”‚  â€¢ trust_level="medium"                                                    â”‚
â”‚  â€¢ Explicit article_url pointer                                            â”‚
â”‚                                                                             â”‚
â”‚  NARRATOR HANDLING:                                                         â”‚
â”‚  â€¢ Tier 3 facts get hedged language:                                       â”‚
â”‚    - "According to Reuters..."                                             â”‚
â”‚    - "Multiple sources report..."                                          â”‚
â”‚    - "As reported in the WSJ..."                                           â”‚
â”‚  â€¢ Never presented with same confidence as Tier 1                          â”‚
â”‚                                                                             â”‚
â”‚  LIMITATIONS:                                                               â”‚
â”‚  â€¢ Multi-source corroboration NOT IMPLEMENTED                              â”‚
â”‚  â€¢ Domain trust enforcement is soft (not hard gate)                        â”‚
â”‚  â€¢ Paywalled content often inaccessible                                    â”‚
â”‚  â€¢ Article content changes post-publication (no archiving)                 â”‚
â”‚                                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## 3. Complete System Diagram

### 3.1 High-Level Architecture

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                    DEEP RESEARCH SYSTEM - COMPLETE ARCHITECTURE                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

                                              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                                              â”‚   USER QUERY    â”‚
                                              â”‚                 â”‚
                                              â”‚ "What was NVDA  â”‚
                                              â”‚  revenue in     â”‚
                                              â”‚  FY2024?"       â”‚
                                              â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                                       â”‚
                                                       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                              ORCHESTRATOR                                                        â”‚
â”‚                                                                                                                  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚                                         QUERY CLASSIFICATION                                              â”‚   â”‚
â”‚  â”‚                                                                                                           â”‚   â”‚
â”‚  â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”            â”‚   â”‚
â”‚  â”‚   â”‚   XBRL      â”‚    â”‚ QUALITATIVE â”‚    â”‚   SIGNAL    â”‚    â”‚    DEEP     â”‚    â”‚   GENERAL   â”‚            â”‚   â”‚
â”‚  â”‚   â”‚  (revenue,  â”‚    â”‚  (risks,    â”‚    â”‚ (drift,     â”‚    â”‚   SEARCH    â”‚    â”‚  (fallback) â”‚            â”‚   â”‚
â”‚  â”‚   â”‚   income)   â”‚    â”‚   MD&A)     â”‚    â”‚  changes)   â”‚    â”‚  (complex)  â”‚    â”‚             â”‚            â”‚   â”‚
â”‚  â”‚   â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜            â”‚   â”‚
â”‚  â”‚          â”‚                  â”‚                  â”‚                  â”‚                  â”‚                   â”‚   â”‚
â”‚  â”‚          â”‚    Embedding-based classification with confidence thresholds              â”‚                   â”‚   â”‚
â”‚  â”‚          â”‚    MIN_CONFIDENCE=0.4, requires sentence-transformers                     â”‚                   â”‚   â”‚
â”‚  â”‚          â”‚                                                                           â”‚                   â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚             â”‚                  â”‚                  â”‚                  â”‚                  â”‚                       â”‚
â”‚             â–¼                  â–¼                  â–¼                  â–¼                  â–¼                       â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”           â”‚
â”‚  â”‚ _handle_xbrl()  â”‚ â”‚_handle_qualit() â”‚ â”‚_handle_signal() â”‚ â”‚_handle_deep()   â”‚ â”‚_handle_general()â”‚           â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜           â”‚
â”‚           â”‚                   â”‚                   â”‚                   â”‚                   â”‚                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
            â”‚                   â”‚                   â”‚                   â”‚                   â”‚
            â–¼                   â–¼                   â–¼                   â–¼                   â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                   â”‚ â”‚                   â”‚ â”‚                   â”‚ â”‚                   â”‚ â”‚                   â”‚
â”‚   TIER 1 FLOW     â”‚ â”‚   TIER 2 FLOW     â”‚ â”‚   SIGNAL FLOW     â”‚ â”‚  DEEP SEARCH      â”‚ â”‚  GENERAL FLOW     â”‚
â”‚                   â”‚ â”‚                   â”‚ â”‚                   â”‚ â”‚                   â”‚ â”‚                   â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚ â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚ â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚ â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚ â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ â”‚  SEC EDGAR    â”‚ â”‚ â”‚ â”‚  SEC EDGAR    â”‚ â”‚ â”‚ â”‚  SEC EDGAR    â”‚ â”‚ â”‚ â”‚  LangGraph    â”‚ â”‚ â”‚ â”‚  Direct LLM   â”‚ â”‚
â”‚ â”‚  XBRL API     â”‚ â”‚ â”‚ â”‚  HTML Filing  â”‚ â”‚ â”‚ â”‚  Multiple     â”‚ â”‚ â”‚ â”‚  Multi-Agent  â”‚ â”‚ â”‚ â”‚  (no facts)   â”‚ â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚ â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚ â”‚ â”‚  Filings      â”‚ â”‚ â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚ â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚         â”‚         â”‚ â”‚         â”‚         â”‚ â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚ â”‚         â”‚         â”‚ â”‚         â”‚         â”‚
â”‚         â–¼         â”‚ â”‚         â–¼         â”‚ â”‚         â”‚         â”‚ â”‚         â–¼         â”‚ â”‚         â–¼         â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚ â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚ â”‚         â–¼         â”‚ â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚ â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ â”‚  XBRL Parser  â”‚ â”‚ â”‚ â”‚  Section      â”‚ â”‚ â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚ â”‚ â”‚  Web Search   â”‚ â”‚ â”‚ â”‚  Structured   â”‚ â”‚
â”‚ â”‚  (edgartools) â”‚ â”‚ â”‚ â”‚  Locator      â”‚ â”‚ â”‚ â”‚  Risk Factor  â”‚ â”‚ â”‚ â”‚  (Tavily)     â”‚ â”‚ â”‚ â”‚  Response     â”‚ â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚ â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚ â”‚ â”‚  Extraction   â”‚ â”‚ â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚ â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚         â”‚         â”‚ â”‚         â”‚         â”‚ â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚ â”‚         â”‚         â”‚ â”‚         â”‚         â”‚
â”‚         â”‚         â”‚ â”‚         â–¼         â”‚ â”‚         â”‚         â”‚ â”‚         â–¼         â”‚ â”‚         â”‚         â”‚
â”‚         â”‚         â”‚ â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚ â”‚         â–¼         â”‚ â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚ â”‚         â”‚         â”‚
â”‚         â”‚         â”‚ â”‚ â”‚Section Router â”‚ â”‚ â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚ â”‚ â”‚  Document     â”‚ â”‚ â”‚         â”‚         â”‚
â”‚         â”‚         â”‚ â”‚ â”‚(Item1A/Item7) â”‚ â”‚ â”‚ â”‚  Semantic     â”‚ â”‚ â”‚ â”‚  Processing   â”‚ â”‚ â”‚         â”‚         â”‚
â”‚         â”‚         â”‚ â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚ â”‚ â”‚  Drift        â”‚ â”‚ â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚ â”‚         â”‚         â”‚
â”‚         â”‚         â”‚ â”‚         â”‚         â”‚ â”‚ â”‚  Analysis     â”‚ â”‚ â”‚         â”‚         â”‚ â”‚         â”‚         â”‚
â”‚         â”‚         â”‚ â”‚         â–¼         â”‚ â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚ â”‚         â–¼         â”‚ â”‚         â”‚         â”‚
â”‚         â”‚         â”‚ â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚ â”‚         â”‚         â”‚ â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚ â”‚         â”‚         â”‚
â”‚         â”‚         â”‚ â”‚ â”‚ LLM Fact      â”‚ â”‚ â”‚         â–¼         â”‚ â”‚ â”‚  LLM Synth    â”‚ â”‚ â”‚         â”‚         â”‚
â”‚         â”‚         â”‚ â”‚ â”‚ Extraction    â”‚ â”‚ â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚ â”‚ â”‚  + Grounding  â”‚ â”‚ â”‚         â”‚         â”‚
â”‚         â”‚         â”‚ â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚ â”‚ â”‚  Boilerplate  â”‚ â”‚ â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚ â”‚         â”‚         â”‚
â”‚         â”‚         â”‚ â”‚         â”‚         â”‚ â”‚ â”‚  Detection    â”‚ â”‚ â”‚         â”‚         â”‚ â”‚         â”‚         â”‚
â”‚         â”‚         â”‚ â”‚         â–¼         â”‚ â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚ â”‚         â”‚         â”‚ â”‚         â”‚         â”‚
â”‚         â”‚         â”‚ â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚ â”‚         â”‚         â”‚ â”‚         â”‚         â”‚ â”‚         â”‚         â”‚
â”‚         â”‚         â”‚ â”‚ â”‚   GATE A      â”‚ â”‚ â”‚         â”‚         â”‚ â”‚         â”‚         â”‚ â”‚         â”‚         â”‚
â”‚         â”‚         â”‚ â”‚ â”‚ Verification  â”‚ â”‚ â”‚         â”‚         â”‚ â”‚         â”‚         â”‚ â”‚         â”‚         â”‚
â”‚         â”‚         â”‚ â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚ â”‚         â”‚         â”‚ â”‚         â”‚         â”‚ â”‚         â”‚         â”‚
â”‚         â”‚         â”‚ â”‚         â”‚         â”‚ â”‚         â”‚         â”‚ â”‚         â”‚         â”‚ â”‚         â”‚         â”‚
â”‚         â–¼         â”‚ â”‚         â–¼         â”‚ â”‚         â–¼         â”‚ â”‚         â–¼         â”‚ â”‚         â–¼         â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚ â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚ â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚ â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚ â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ â”‚   FACTSTORE   â”‚ â”‚ â”‚ â”‚   FACTSTORE   â”‚ â”‚ â”‚ â”‚ SIGNAL STORE  â”‚ â”‚ â”‚ â”‚   FACTSTORE   â”‚ â”‚ â”‚ â”‚  NO STORAGE   â”‚ â”‚
â”‚ â”‚  tier1/high   â”‚ â”‚ â”‚ â”‚  tier2/high   â”‚ â”‚ â”‚ â”‚  (JSONL)      â”‚ â”‚ â”‚ â”‚  tier3/medium â”‚ â”‚ â”‚ â”‚  (pass-thru)  â”‚ â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚ â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚ â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚ â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚ â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚         â”‚         â”‚ â”‚         â”‚         â”‚ â”‚         â”‚         â”‚ â”‚         â”‚         â”‚ â”‚         â”‚         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
          â”‚                     â”‚                     â”‚                     â”‚                     â”‚
          â”‚                     â”‚                     â”‚                     â”‚                     â”‚
          â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                     â”‚                     â”‚                     â”‚                     â”‚
                     â–¼                     â–¼                     â–¼                     â–¼
          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
          â”‚                                    NARRATOR                                          â”‚
          â”‚                                                                                      â”‚
          â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
          â”‚  â”‚  INPUTS:                                                                       â”‚ â”‚
          â”‚  â”‚  â€¢ FactStore (verified facts with tier + trust metadata)                       â”‚ â”‚
          â”‚  â”‚  â€¢ Original question                                                           â”‚ â”‚
          â”‚  â”‚  â€¢ Entity context                                                              â”‚ â”‚
          â”‚  â”‚                                                                                â”‚ â”‚
          â”‚  â”‚  RULES:                                                                        â”‚ â”‚
          â”‚  â”‚  â€¢ ONLY use facts from FactStore (never invent)                               â”‚ â”‚
          â”‚  â”‚  â€¢ Hedge language based on tier:                                              â”‚ â”‚
          â”‚  â”‚    - Tier 1: "Revenue was $35B"                                               â”‚ â”‚
          â”‚  â”‚    - Tier 2: "The filing states revenue was $35B"                             â”‚ â”‚
          â”‚  â”‚    - Tier 3: "According to Reuters, revenue was $35B"                         â”‚ â”‚
          â”‚  â”‚  â€¢ If FactStore empty â†’ return insufficient_data=True                         â”‚ â”‚
          â”‚  â”‚  â€¢ Include citations for every fact used                                      â”‚ â”‚
          â”‚  â”‚                                                                                â”‚ â”‚
          â”‚  â”‚  INVARIANTS:                                                                   â”‚ â”‚
          â”‚  â”‚  â€¢ Narrator NEVER sees raw source text                                        â”‚ â”‚
          â”‚  â”‚  â€¢ Narrator CANNOT access LLM without going through FactStore                 â”‚ â”‚
          â”‚  â”‚  â€¢ Every claim in output must trace to a fact_id                              â”‚ â”‚
          â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
          â”‚                                                                                      â”‚
          â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                                       â”‚
                                                       â–¼
                                         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                                         â”‚    NARRATED REPORT      â”‚
                                         â”‚                         â”‚
                                         â”‚  {                      â”‚
                                         â”‚    "query": "...",      â”‚
                                         â”‚    "answer": "...",     â”‚
                                         â”‚    "facts_used": [...], â”‚
                                         â”‚    "citations": [...],  â”‚
                                         â”‚    "insufficient_data": â”‚
                                         â”‚      false              â”‚
                                         â”‚  }                      â”‚
                                         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```


